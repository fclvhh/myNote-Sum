# 模板语法

## 胡子语法

​			{{ }}    双花括号法   里面可以装任何js相关的东西

比如: 

​	对象,js代码,函数

详细参看<https://cn.vuejs.org/v2/guide/syntax.html>



## 动态参数

​		[ js表达式  ] 作为动态参数   可以动态获取 key值





# 内部指令

详细请看jspang/vue



所有的内部指令都写在html 中 , `v-xxx` 的格式





## 条件渲染指令



- v-if 和 v-else
- v-if ,v-else-if 和 v-else
- v-show

**v-show 和  v-if 辨析**:

1. v-show:一定会把元素渲染到`dom`,只是控制是否显示
2. v-if: 决定是否把元素渲染到`dom`



## 列表渲染指令

- v-for

模板写法

```html
 <li v-for="item in items">
        {{item}}
</li>
```

js写法

```javascript
var app=new Vue({
     el:'#app',
     data:{
         items:[20,23,18,65,32,19,54,56,41]
     }
})
```



排序

```javascript
computed:{
    sortItems:function(){
          return this.items.sort();
    }
}
```

我们在computed里新声明了一个对象`sortItems`，如果不重新声明会污染原来的数据源，这是Vue不允许的，所以你要重新声明一个对象。同时我们也要修改模板里面的items->``sortItems`



`js中排序bug解决`

在外面定义排序函数

```text
function sortNumber(a,b){
            return a-b
  }
```

用法

```text
computed:{
    sortItems:function(){
    return this.items.sort(sortNumber);
    }
 }
```



上面的完整代码练习

```html
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="./node_modules/vue/dist/vue.min.js"></script>
    <title>Hello world</title>
</head>
<body>
    <h1>Hello World</h1>
    <hr>
    <div id="app">
        <h1>{{message}}</h1>
        <div v-if = 'isLogin'>小小虎牙真神秘,狗狗也能播游戏!</div>
        <div v-else>炫神alt+f4 , 明天早点来吧!</div>
        <h2 v-show = 'ok'> 这就是玄家军吗?真是有够好笑的呢!</h2>
        <ul>
                <li v-for="item in sortItems">
                     {{item}}
                </li>
        </ul>
    </div>
 
    <script type="text/javascript">
        var app=new Vue({
            el:'#app',
            data:{
                message:'只有我一个人想笑吗^^!!!',
                isLogin: false ,
                ok:true,
                items:[33,77,14,5,92,23]
            },
            computed:{
                sortItems : function(){return this.items.sort(sortNumber)}
            }
        })
        function sortNumber(a,b){
            return a-b
        }
        function sortByKey(array,key){
    	return array.sort(function(a,b){
     	 var x=a[key];
     	 var y=b[key];
      	return ((x<y)?-1:((x>y)?1:0));
   		});
	}
    </script>
</body>
</html>

```



**思考:数组用v-for?**



## 文本和html元素渲染

> 起因:胡子模板的缺点,当网速出问题的时候,可能会导致网页中出现形如:{{message}}
>
> 这样对用户很不友好,所以选择用命令进行绑定

- `v-txet`
- `v-html`
- 用法和之前命令的用法一致



## 绑定事件

- v-on

```html
<xx v-on:click = 'funName'></xx>
```





## 数据的双向绑定

- v-modle
- 可用属性
  - .lazy：取代` imput `监听 change 事件。
  - .number：输入字符串转为数字。
  - .trim：输入去掉首尾空格



## 处理html内的标签属性

- v-bind



## 其他指令

v-pre & v-cloak & v-once



代码:

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./node_modules/vue/dist/vue.min.js"></script>
    <title>表单和双向绑定</title>
</head>

<body>
    <div id="app">
        <p>原始文本信息：{{message}}</p>
        <h3>文本框</h3>
        <p>v-model:<input type="text" v-model="message"></p>
        <hr>
        <textarea cols="30" rows="10" v-model.lazy='message'></textarea>
        <hr>
        <h3>多选按钮绑定一个值</h3>
        <input type="checkbox" id="isTrue" v-model="isTrue">
        <label for='isTrue'>{{isTrue}}</label>
        <hr>
        <h3>单选按钮绑定</h3>
        <input type="radio" id="one" value="男" v-model="sex">
        <label for="one">男</label>
        <input type="radio" id="two" value="女" v-model="sex">
        <label for="one">女</label>
        <p>{{sex}}</p>
    </div>
</body>
<script type="text/javascript">
    var app = new Vue({
        el: '#app',
        data: {
            message: 'hello Vue!',
            isTrue: true,
            sex:'男'
        }
    })
</script>

</html>
```





----



# 自定义指令

> 不在构造器里面,在外部自己创建的指令



## `Vue.directive`自定义指令

```text
Vue.directive('jspang',function(el,binding,vnode){
        el.style='color:'+binding.value;
});
```

## 自定义指令中传递的三个参数

- el: 指令所绑定的元素，可以用来直接操作DOM。
- binding: 一个对象，包含指令的很多信息。
- vnode: Vue编译生成的虚拟节点。

## 自定义指令的生命周期

自定义指令有五个生命周期（也叫钩子函数），分别是 bind,inserted,update,componentUpdated,unbind

1. bind:只调用一次，指令第一次绑定到元素时调用，用这个钩子函数可以定义一个绑定时执行一次的初始化动作。
2. inserted:被绑定元素插入父节点时调用（父节点存在即可调用，不必存在于document中）。
3. update:被绑定于元素所在的模板更新时调用，而无论绑定值是否变化。通过比较更新前后的绑定值，可以忽略不必要的模板更新。
4. componentUpdated:被绑定元素所在模板完成一次更新周期时调用。
5. unbind:只调用一次，指令与元素解绑时调用。

```text
bind:function(){//被绑定
     console.log('1 - bind');
},
inserted:function(){//绑定到节点
      console.log('2 - inserted');
},
update:function(){//组件更新
      console.log('3 - update');
},
componentUpdated:function(){//组件更新完成
      console.log('4 - componentUpdated');
},
unbind:function(){//解绑
      console.log('1 - bind');
}
```

代码

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./node_modules/vue/dist/vue.min.js"></script>
    <title>自定义指令生命周期</title>
</head>

<body>
    <div id="app">
        <div v-jspang='color'>{{num}}</div>
        <button @click='add'>ADD</button>
        <hr>
        <button onclick="unbind()">解绑</button>
    </div>
    <script>
        function unbind() {
            app.$destroy()
        }
        Vue.directive('jspang', {
            bind: function (el,binding) {//被绑定
                console.log('1 - bind');
                el.style = 'color:' + binding.value;
            },
            inserted: function () {//绑定到节点
                console.log('2 - inserted');
            },
            update: function () {//组件更新
                console.log('3 - update');
            },
            componentUpdated: function () {//组件更新完成
                console.log('4 - componentUpdated');
            },
            unbind: function () {//解绑
                console.log('5 - bind');
            }
        });

        var app = new Vue({
            el: '#app',
            data: {
                num: 10,
                color: 'red'
            },
            methods:{
                add : function(){
                    this.num++
                }
            }

        })
    </script>
</body>

</html>
```

